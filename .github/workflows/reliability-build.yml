name: ReliabilityBuild
on:
  workflow_dispatch:
jobs:
  reliability-build:
    runs-on: ubuntu-latest
    container:
      image: dockbuild/ubuntu1604:latest
    steps:
      - name: Checkout code
        run: git clone --depth=1 https://github.com/holochain/reliability.git

      - name: Print Glibc Version
        run: ldd --version ldd

      - name: Install Rust
        run: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- --profile minimal -y

      - name: Build reliability
        run: |
          cd reliability
          PATH=~/.cargo/bin:$(pwd)/go/bin:$PATH cargo build --release

      - name: Print reliability ldd
        run: ldd target/release/reliability
